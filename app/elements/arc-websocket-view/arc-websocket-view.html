<dom-module id="arc-websocket-view">
  <template>
    <style>
      :host {
        display: block;
      }
      .remote-address-line {
        @apply(--layout-horizontal);

      }
      .url-input {
        min-width: 320px;
      }

      .table-columns {
        height: 56px;
        font-family: 'Roboto';
        font-weight: 500;
        color: rgba(0, 0, 0, 0.54);
        font-size: 12px;
      }
      .table-values {
        /*height: 48px;*/
        font-family: 'Roboto';
        color: rgba(0, 0, 0, 0.87);
        font-size: 13px;
        padding: 16px 24px !important;
      }

      .direction-column,
      .time-column,
      .message-column {
        padding-right: 24px;
      }
      .time-column,
      .message-column {
        padding-left: 56px;
      }
      .table-values,
      .table-columns {
        border-bottom: 1px rgba(0, 0, 0, 0.12) solid;
        padding: 0 24px;
      }
      .direction-column {
        min-width: 56px;
        padding: 0 24px 0 0;
      }
      .time-column {
        min-width: 70px;
      }
      .table-columns:last-child {
        border-bottom: 1px rgba(0, 0, 0, 0) solid;
      }

    </style>
    <div class="remote-address-line">
      <paper-input label="Socket URL" value="{{url}}" class="url-input"></paper-input>
      <paper-button hidden$="{{connected}}" disabled$="[[connectDisabled]]" on-tap="_connect">connect</paper-button>
      <paper-button hidden$="{{!connected}}" on-tap="_disconnect">disconnect</paper-button>
    </div>
    <div hidden$="{{!connecting}}">
      <p>connecting to the remote server</p>
      <paper-progress indeterminate></paper-progress>
    </div>
    <div hidden$="{{!retrying}}">
      <h3>Connection lost</h3>
      <p>Will try to reconnect.</p>
    </div>
    <div hidden$="{{hideMessages}}">


      <paper-tabs selected="{{selectedTab}}">
        <paper-tab>Text</paper-tab>
        <paper-tab>File</paper-tab>
      </paper-tabs>
      <iron-pages selected="{{selectedTab}}">
        <section>
          <paper-textarea label="Your message" value="{{message}}"></paper-textarea>
          <paper-button on-tap="_sendMessage">send</paper-button>
        </section>
        <section>
          <file-drop id="fileDrop" on-file-ready="_onFile"></file-drop>
          <paper-button on-tap="_sendMessage">send</paper-button>
        </section>
      </iron-pages>

      <div class="table">
        <div class="table-columns layout horizontal center">
          <div class="direction-column" id="directionColumn">Direction</div>
          <div class="time-column" id="timeColumn">Time</div>
          <div class="message-column" id="messageColumn">Message</div>
          <paper-tooltip for="directionColumn">Either 'in' for incoming or 'out' for outgoing messages</paper-tooltip>
          <paper-tooltip for="timeColumn">Event time</paper-tooltip>
          <paper-tooltip for="messageColumn">Message sent to / received from the server</paper-tooltip>
        </div>
        <template is="dom-repeat" items="{{messages}}" sort="_sortMessages">
          <div class="table-values layout horizontal center">
            <div class="direction-column">{{item.direction}}</div>
            <div class="time-column">{{_computeTime(item.time)}}</div>
            <div class="message-column">{{item.message}}</div>
          </div>
        </template>

      </div>
    </div>
    <paper-toast text="You must enter remote address. Eg. ws://echo.websocket.org" id="emptyAddress"></paper-toast>
  </template>
  <script src="arc-websocket-view.js"></script>
</dom-module>
