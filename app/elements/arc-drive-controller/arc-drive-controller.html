<dom-module id="arc-drive-controller">
  <template>
    <style>
    :host {
      width: calc(100% - 40px);
    }
    </style>
    <iron-pages selected="{{viewSelected}}">
      <drive-list-view id="listView" items="{{items}}" query="{{query}}" loading="[[loading]]" on-file-selected="_fileSelected" on-more-data="loadMoreData" on-search="_onSearch"></drive-list-view>
      <drive-error-message message="[[errorMessage]]"></drive-error-message>
      <drive-open-from-drive-ui></drive-open-from-drive-ui>
      <chrome-not-signedin-view></chrome-not-signedin-view>
    </iron-pages>
    <iron-ajax id="query" url="https://www.googleapis.com/drive/v3/files" params="{{queryParams}}" handle-as="json" on-response="_handleListResponse" on-error="_handleDriveApiError" headers="{{authHeaders}}" debounce-duration="300"></iron-ajax>
    <iron-ajax id="download" url="https://www.googleapis.com/drive/v3/files/[[fileId]]?alt=media" handle-as="json" on-response="_handleDownloadResponse" on-error="_handleDriveApiError" headers="{{authHeaders}}" debounce-duration="300"></iron-ajax>
    <user-provider auth-headers="{{authHeaders}}" id="userProvider" authorized="{{appAuthorized}}" not-signed-in="{{notSignedIn}}"></user-provider>
  </template>
  <script src="arc-drive-controller.js"></script>
</dom-module>
